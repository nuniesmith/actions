# =================================================================
# FKS Multi-Server Environment Configuration Template
# =================================================================
# 
# This template provides environment variable configuration for
# FKS Trading Systems multi-server deployment
#
# Copy this file to:
# - Single server: .env
# - Multi-server: Copy sections to respective servers
#
# Replace placeholder values with your actual configuration

# =================================================================
# DEPLOYMENT CONFIGURATION
# =================================================================
DEPLOYMENT_MODE=multi              # single, multi
ENVIRONMENT=production             # development, staging, production

# =================================================================
# DOMAIN CONFIGURATION
# =================================================================
DOMAIN_NAME=7gram.xyz
AUTH_DOMAIN_NAME=auth.7gram.xyz
API_DOMAIN_NAME=api.7gram.xyz
WEB_DOMAIN_NAME=fks.7gram.xyz

# =================================================================
# MULTI-SERVER TAILSCALE IPS
# =================================================================
# These will be automatically populated by the deployment scripts
AUTH_SERVER_IP=100.64.0.1         # Tailscale IP of auth server
API_SERVER_IP=100.64.0.2          # Tailscale IP of api server
WEB_SERVER_IP=100.64.0.3          # Tailscale IP of web server

# =================================================================
# DATABASE CONFIGURATION (API Server)
# =================================================================
POSTGRES_USER=fks_user
POSTGRES_PASSWORD=generate_secure_password_here
POSTGRES_DB=fks_trading
POSTGRES_HOST=postgres             # localhost for API server
POSTGRES_PORT=5432

# =================================================================
# REDIS CONFIGURATION (API Server)
# =================================================================
REDIS_PASSWORD=generate_secure_redis_password_here
REDIS_HOST=redis                   # localhost for API server
REDIS_PORT=6379

# =================================================================
# AUTHENTICATION CONFIGURATION
# =================================================================
# JWT for API authentication
JWT_SECRET_KEY=generate_secure_jwt_key_here

# Authentik SSO (Auth Server)
AUTHENTIK_SECRET_KEY=generate_secure_50_char_authentik_key_here
AUTHENTIK_DB_USER=authentik
AUTHENTIK_DB_PASSWORD=generate_secure_authentik_db_password_here
AUTHENTIK_DB_NAME=authentik

# Cross-server authentication URLs
AUTHENTIK_URL=https://auth.7gram.xyz
AUTHENTIK_CLIENT_ID=your_authentik_client_id
AUTHENTIK_CLIENT_SECRET=your_authentik_client_secret

# =================================================================
# DOCKER CONFIGURATION
# =================================================================
DOCKER_REGISTRY=docker.io
DOCKER_NAMESPACE=nuniesmith       # Your Docker Hub username
SERVICE_TAG=latest

# Build configuration
BUILD_ENV=production
NODE_ENV=production

# =================================================================
# SSL/TLS CONFIGURATION
# =================================================================
ENABLE_SSL=true
SSL_MOUNT_PATH=/etc/nginx/ssl
CERTBOT_WEBROOT=/var/www/certbot
ADMIN_EMAIL=admin@7gram.xyz

# =================================================================
# FRONTEND CONFIGURATION (Web Server)
# =================================================================
# React app environment variables
REACT_APP_API_URL=https://api.7gram.xyz
REACT_APP_DATA_URL=https://api.7gram.xyz
REACT_APP_WS_URL=wss://api.7gram.xyz/ws
REACT_APP_AUTH_URL=https://auth.7gram.xyz
REACT_APP_VSCODE_URL=https://code.7gram.xyz

# Vite build environment variables (alternative to React)
VITE_API_URL=https://api.7gram.xyz
VITE_DATA_URL=https://api.7gram.xyz
VITE_WS_URL=wss://api.7gram.xyz/ws
VITE_AUTH_URL=https://auth.7gram.xyz

# =================================================================
# TRADING CONFIGURATION (API Server)
# =================================================================
TRADING_ENABLED=false              # Set to true for live trading
PAPER_TRADING=true                 # Always true for safety
MAX_POSITION_SIZE=10
RISK_LIMIT_PERCENT=2.0
MAX_DAILY_LOSS=1000
MAX_POSITION_VALUE=50000

# Trading API Configuration
RITHMIC_USER=your_rithmic_username
RITHMIC_PASSWORD=your_rithmic_password
RITHMIC_SYSTEM_NAME=Rithmic Paper Trading
RITHMIC_EXCHANGE=CME
RITHMIC_FEED_TYPE=delayed

# Market data sources
POLYGON_API_KEY=your_polygon_api_key
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_api_key

# =================================================================
# API SERVER CONFIGURATION
# =================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2
API_RATE_LIMIT=100
ENABLE_API_DOCS=true
ENABLE_METRICS=true
API_LOG_LEVEL=INFO

# Worker configuration
WORKER_CONCURRENCY=2
WORKER_QUEUES=default,trading,analysis,model_training
WORKER_PREFETCH_MULTIPLIER=1
WORKER_LOG_LEVEL=INFO

# Data service configuration
DATA_FETCH_INTERVAL=60
SERVICE_PORT=9001

# =================================================================
# WEB SERVER CONFIGURATION
# =================================================================
WEB_PORT=3000
WEB_HOST=0.0.0.0

# Nginx configuration
WORKER_PROCESSES=1
WORKER_CONNECTIONS=1024
GZIP_ENABLED=true
GZIP_LEVEL=6

# Security headers
ENABLE_SECURITY_HEADERS=true
ENABLE_HSTS=true
CSP_ENABLED=true
CORS_ORIGIN=https://fks.7gram.xyz

# =================================================================
# MONITORING CONFIGURATION
# =================================================================
# Netdata cloud integration
NETDATA_CLAIM_TOKEN=your_netdata_claim_token
NETDATA_CLAIM_ROOM=your_netdata_room_id

# Logging configuration
LOG_LEVEL=INFO
APP_LOG_LEVEL=INFO

# =================================================================
# EMAIL CONFIGURATION (Optional)
# =================================================================
SMTP_HOST=localhost
SMTP_PORT=25
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=false
SMTP_USE_SSL=false
SMTP_FROM=fks@7gram.xyz

# =================================================================
# DEVELOPMENT TOOLS
# =================================================================
VSCODE_PASSWORD=your_vscode_password
ENABLE_ADMINER=true
ENABLE_REDIS_COMMANDER=true

# =================================================================
# TIMEZONE CONFIGURATION
# =================================================================
TZ=America/Toronto

# =================================================================
# FEATURE FLAGS
# =================================================================
ENABLE_GPU=false                   # Set to true if using GPU services
DEBUG_MODE=false
ENABLE_CIRCUIT_BREAKER=true

# =================================================================
# BACKUP CONFIGURATION
# =================================================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=7

# =================================================================
# CLOUDFLARE DNS CONFIGURATION (For GitHub Actions)
# =================================================================
# These are set as GitHub secrets, not in .env files
# CLOUDFLARE_API_TOKEN=your_cloudflare_api_token
# CLOUDFLARE_ZONE_ID=your_cloudflare_zone_id

# =================================================================
# LINODE CONFIGURATION (For GitHub Actions)
# =================================================================
# These are set as GitHub secrets, not in .env files
# LINODE_CLI_TOKEN=your_linode_api_token

# =================================================================
# TAILSCALE CONFIGURATION (For GitHub Actions)
# =================================================================
# These are set as GitHub secrets, not in .env files
# TAILSCALE_AUTH_KEY=your_tailscale_auth_key

# =================================================================
# SECURITY NOTES
# =================================================================
# 1. Never commit this file with real secrets to version control
# 2. Use strong, unique passwords for all services
# 3. Regularly rotate authentication keys and passwords
# 4. Use GitHub secrets for sensitive configuration in CI/CD
# 5. Enable 2FA on all external services (Cloudflare, Linode, etc.)
# 6. Review and audit access permissions regularly
# 7. Monitor logs for suspicious activity
# 8. Keep all services updated with security patches

# =================================================================
# DEPLOYMENT CHECKLIST
# =================================================================
# □ Replace all placeholder values with actual configuration
# □ Generate secure passwords for all services
# □ Set up GitHub secrets for CI/CD
# □ Configure Cloudflare DNS zone
# □ Set up Tailscale network
# □ Test connectivity between servers
# □ Verify SSL certificates
# □ Check service health endpoints
# □ Monitor logs for errors
# □ Set up backup procedures
